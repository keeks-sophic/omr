{"Timestamp":"2026-01-21T12:33:59.6820197+08:00","Level":"Information","MessageTemplate":"User profile is available. Using '{FullName}' as key repository and Windows DPAPI to encrypt keys at rest.","RenderedMessage":"User profile is available. Using '\"C:\\Users\\SA-SI-GFWP6G3\\AppData\\Local\\ASP.NET\\DataProtection-Keys\"' as key repository and Windows DPAPI to encrypt keys at rest.","Properties":{"FullName":"C:\\Users\\SA-SI-GFWP6G3\\AppData\\Local\\ASP.NET\\DataProtection-Keys","EventId":{"Id":63,"Name":"UsingProfileAsKeyRepositoryWithDPAPI"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"Timestamp":"2026-01-21T12:34:01.1742872+08:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","RenderedMessage":"Executed DbCommand (\"13\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"CREATE EXTENSION IF NOT EXISTS postgis;\"","Properties":{"elapsed":"13","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"CREATE EXTENSION IF NOT EXISTS postgis;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}}
{"Timestamp":"2026-01-21T12:34:01.2292364+08:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","RenderedMessage":"Executed DbCommand (\"6\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"SELECT \\\"MigrationId\\\", \\\"ProductVersion\\\"\r\nFROM \\\"__EFMigrationsHistory\\\"\r\nORDER BY \\\"MigrationId\\\";\"","Properties":{"elapsed":"6","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT \"MigrationId\", \"ProductVersion\"\r\nFROM \"__EFMigrationsHistory\"\r\nORDER BY \"MigrationId\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}}
{"Timestamp":"2026-01-21T12:34:01.4090807+08:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","RenderedMessage":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"SELECT 1\"","Properties":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}}
{"Timestamp":"2026-01-21T12:34:01.4889787+08:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","RenderedMessage":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"CREATE EXTENSION IF NOT EXISTS postgis;\r\nCREATE TABLE IF NOT EXISTS \\\"__EFMigrationsHistory\\\" (\r\n    \\\"MigrationId\\\" character varying(150) NOT NULL,\r\n    \\\"ProductVersion\\\" character varying(32) NOT NULL,\r\n    CONSTRAINT \\\"PK___EFMigrationsHistory\\\" PRIMARY KEY (\\\"MigrationId\\\")\r\n);\"","Properties":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"CREATE EXTENSION IF NOT EXISTS postgis;\r\nCREATE TABLE IF NOT EXISTS \"__EFMigrationsHistory\" (\r\n    \"MigrationId\" character varying(150) NOT NULL,\r\n    \"ProductVersion\" character varying(32) NOT NULL,\r\n    CONSTRAINT \"PK___EFMigrationsHistory\" PRIMARY KEY (\"MigrationId\")\r\n);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}}
{"Timestamp":"2026-01-21T12:34:01.5104593+08:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","RenderedMessage":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"LOCK TABLE \\\"__EFMigrationsHistory\\\" IN ACCESS EXCLUSIVE MODE\"","Properties":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"LOCK TABLE \"__EFMigrationsHistory\" IN ACCESS EXCLUSIVE MODE","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}}
{"Timestamp":"2026-01-21T12:34:01.5153857+08:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","RenderedMessage":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"SELECT \\\"MigrationId\\\", \\\"ProductVersion\\\"\r\nFROM \\\"__EFMigrationsHistory\\\"\r\nORDER BY \\\"MigrationId\\\";\"","Properties":{"elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT \"MigrationId\", \"ProductVersion\"\r\nFROM \"__EFMigrationsHistory\"\r\nORDER BY \"MigrationId\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}}
{"Timestamp":"2026-01-21T12:34:01.5228147+08:00","Level":"Information","MessageTemplate":"No migrations were applied. The database is already up to date.","RenderedMessage":"No migrations were applied. The database is already up to date.","Properties":{"EventId":{"Id":20405,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationsNotApplied"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations"}}
{"Timestamp":"2026-01-21T12:34:01.5327476+08:00","Level":"Information","MessageTemplate":"Maps migration: checking multi-map schema","RenderedMessage":"Maps migration: checking multi-map schema","Properties":{"SourceContext":"BackendV3.Infrastructure.Persistence.Init.DatabaseInitService"}}
{"Timestamp":"2026-01-21T12:34:01.5748335+08:00","Level":"Information","MessageTemplate":"Maps migration: map_versions.Name is_nullable {Before} -> {After}","RenderedMessage":"Maps migration: map_versions.Name is_nullable True -> True","Properties":{"Before":true,"After":true,"SourceContext":"BackendV3.Infrastructure.Persistence.Init.DatabaseInitService"}}
{"Timestamp":"2026-01-21T12:34:01.5939497+08:00","Level":"Information","MessageTemplate":"Maps migration: map_versions.IsActive is_nullable {Before} -> {After}","RenderedMessage":"Maps migration: map_versions.IsActive is_nullable True -> True","Properties":{"Before":true,"After":true,"SourceContext":"BackendV3.Infrastructure.Persistence.Init.DatabaseInitService"}}
{"Timestamp":"2026-01-21T12:34:01.6677930+08:00","Level":"Information","MessageTemplate":"Maps migration: multi-map schema ensured","RenderedMessage":"Maps migration: multi-map schema ensured","Properties":{"SourceContext":"BackendV3.Infrastructure.Persistence.Init.DatabaseInitService"}}
{"Timestamp":"2026-01-21T12:34:01.7730926+08:00","Level":"Information","MessageTemplate":"Now listening on: {address}","RenderedMessage":"Now listening on: \"http://localhost:5000\"","Properties":{"address":"http://localhost:5000","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"Timestamp":"2026-01-21T12:34:01.7748796+08:00","Level":"Information","MessageTemplate":"Application started. Press Ctrl+C to shut down.","RenderedMessage":"Application started. Press Ctrl+C to shut down.","Properties":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"Timestamp":"2026-01-21T12:34:01.7757215+08:00","Level":"Information","MessageTemplate":"Hosting environment: {EnvName}","RenderedMessage":"Hosting environment: \"Production\"","Properties":{"EnvName":"Production","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"Timestamp":"2026-01-21T12:34:01.7766335+08:00","Level":"Information","MessageTemplate":"Content root path: {ContentRoot}","RenderedMessage":"Content root path: \"C:\\Users\\SA-SI-GFWP6G3\\Documents\\skylink\\newsky\\backendV3\"","Properties":{"ContentRoot":"C:\\Users\\SA-SI-GFWP6G3\\Documents\\skylink\\newsky\\backendV3","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"Timestamp":"2026-01-21T12:34:17.7625137+08:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","RenderedMessage":"Request starting \"HTTP/1.1\" \"GET\" \"http\"://\"localhost:5000\"\"\"\"/api/v1/auth/me\"\"\" - null null","TraceId":"f4516c9917df126045b25aec0def8485","SpanId":"cdf6ca13c9d2bf4c","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"localhost:5000","PathBase":"","Path":"/api/v1/auth/me","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNIOKPBCIG8G:00000001","RequestPath":"/api/v1/auth/me","ConnectionId":"0HNIOKPBCIG8G"}}
{"Timestamp":"2026-01-21T12:34:17.7870507+08:00","Level":"Warning","MessageTemplate":"Failed to determine the https port for redirect.","RenderedMessage":"Failed to determine the https port for redirect.","TraceId":"f4516c9917df126045b25aec0def8485","SpanId":"cdf6ca13c9d2bf4c","Properties":{"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNIOKPBCIG8G:00000001","RequestPath":"/api/v1/auth/me","ConnectionId":"0HNIOKPBCIG8G"}}
{"Timestamp":"2026-01-21T12:34:17.8303519+08:00","Level":"Information","MessageTemplate":"{event} {method} {path}","RenderedMessage":"\"api.request.start\" \"GET\" \"/api/v1/auth/me\"","TraceId":"f4516c9917df126045b25aec0def8485","SpanId":"cdf6ca13c9d2bf4c","Properties":{"event":"api.request.start","method":"GET","path":"/api/v1/auth/me","SourceContext":"BackendV3.Infrastructure.Logging.RequestLoggingMiddleware","correlationId":"6578b540f4db4beca830930c55185e12","requestId":"0HNIOKPBCIG8G:00000001","route":"api/v1/auth/me","userId":null,"roles":null,"RequestId":"0HNIOKPBCIG8G:00000001","RequestPath":"/api/v1/auth/me","ConnectionId":"0HNIOKPBCIG8G"}}
{"Timestamp":"2026-01-21T12:34:17.8384974+08:00","Level":"Information","MessageTemplate":"Authorization failed. {Reason}","RenderedMessage":"Authorization failed. \"These requirements were not met:\r\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.\"","TraceId":"f4516c9917df126045b25aec0def8485","SpanId":"cdf6ca13c9d2bf4c","Properties":{"Reason":"These requirements were not met:\r\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.","EventId":{"Id":2,"Name":"UserAuthorizationFailed"},"SourceContext":"Microsoft.AspNetCore.Authorization.DefaultAuthorizationService","correlationId":"6578b540f4db4beca830930c55185e12","requestId":"0HNIOKPBCIG8G:00000001","method":"GET","path":"/api/v1/auth/me","route":"api/v1/auth/me","userId":null,"roles":null,"RequestId":"0HNIOKPBCIG8G:00000001","RequestPath":"/api/v1/auth/me","ConnectionId":"0HNIOKPBCIG8G"}}
{"Timestamp":"2026-01-21T12:34:17.8427144+08:00","Level":"Information","MessageTemplate":"AuthenticationScheme: {AuthenticationScheme} was challenged.","RenderedMessage":"AuthenticationScheme: \"Bearer\" was challenged.","TraceId":"f4516c9917df126045b25aec0def8485","SpanId":"cdf6ca13c9d2bf4c","Properties":{"AuthenticationScheme":"Bearer","EventId":{"Id":12,"Name":"AuthenticationSchemeChallenged"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","correlationId":"6578b540f4db4beca830930c55185e12","requestId":"0HNIOKPBCIG8G:00000001","method":"GET","path":"/api/v1/auth/me","route":"api/v1/auth/me","userId":null,"roles":null,"RequestId":"0HNIOKPBCIG8G:00000001","RequestPath":"/api/v1/auth/me","ConnectionId":"0HNIOKPBCIG8G"}}
{"Timestamp":"2026-01-21T12:34:17.8440904+08:00","Level":"Information","MessageTemplate":"{event} {statusCode} {durationMs}","RenderedMessage":"\"api.request.end\" 401 16","TraceId":"f4516c9917df126045b25aec0def8485","SpanId":"cdf6ca13c9d2bf4c","Properties":{"event":"api.request.end","statusCode":401,"durationMs":16,"SourceContext":"BackendV3.Infrastructure.Logging.RequestLoggingMiddleware","correlationId":"6578b540f4db4beca830930c55185e12","requestId":"0HNIOKPBCIG8G:00000001","method":"GET","path":"/api/v1/auth/me","route":"api/v1/auth/me","userId":null,"roles":null,"RequestId":"0HNIOKPBCIG8G:00000001","RequestPath":"/api/v1/auth/me","ConnectionId":"0HNIOKPBCIG8G"}}
{"Timestamp":"2026-01-21T12:34:17.8505656+08:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","RenderedMessage":"Request finished \"HTTP/1.1\" \"GET\" \"http\"://\"localhost:5000\"\"\"\"/api/v1/auth/me\"\"\" - 401 0 null 89.9409ms","TraceId":"f4516c9917df126045b25aec0def8485","SpanId":"cdf6ca13c9d2bf4c","Properties":{"ElapsedMilliseconds":89.9409,"StatusCode":401,"ContentType":null,"ContentLength":0,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"localhost:5000","PathBase":"","Path":"/api/v1/auth/me","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNIOKPBCIG8G:00000001","RequestPath":"/api/v1/auth/me","ConnectionId":"0HNIOKPBCIG8G"}}
